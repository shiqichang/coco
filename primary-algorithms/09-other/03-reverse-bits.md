# 03 é¢ å€’äºŒè¿›åˆ¶ä½

> ğŸŒˆ **åˆçº§ç®—æ³•ç³»åˆ—ä¹‹å…¶å®ƒ**
>
> ä½ çš„æ— ç•æºäºæ— çŸ¥ã€‚

## é¢˜ç›®æè¿°

é¢ å€’ç»™å®šçš„ 32 ä½æ— ç¬¦å·æ•´æ•°çš„äºŒè¿›åˆ¶ä½ã€‚

### ç¤ºä¾‹1

> è¾“å…¥: 00000010100101000001111010011100
> è¾“å‡º: 00111001011110000010100101000000
> è§£é‡Š: è¾“å…¥çš„äºŒè¿›åˆ¶ä¸² 00000010100101000001111010011100 è¡¨ç¤ºæ— ç¬¦å·æ•´æ•° 43261596ï¼Œ
> å› æ­¤è¿”å› 964176192ï¼Œå…¶äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼ä¸º 00111001011110000010100101000000ã€‚

### ç¤ºä¾‹2

> è¾“å…¥ï¼š11111111111111111111111111111101
> è¾“å‡ºï¼š10111111111111111111111111111111
> è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² 11111111111111111111111111111101 è¡¨ç¤ºæ— ç¬¦å·æ•´æ•° 4294967293ï¼Œ
> å› æ­¤è¿”å› 3221225471 å…¶äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼ä¸º 10111111111111111111111111111111 ã€‚

### æç¤º

- è¯·æ³¨æ„ï¼Œåœ¨æŸäº›è¯­è¨€ï¼ˆå¦‚ Javaï¼‰ä¸­ï¼Œæ²¡æœ‰æ— ç¬¦å·æ•´æ•°ç±»å‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¾“å…¥å’Œè¾“å‡ºéƒ½å°†è¢«æŒ‡å®šä¸ºæœ‰ç¬¦å·æ•´æ•°ç±»å‹ï¼Œå¹¶ä¸”ä¸åº”å½±å“

  æ‚¨çš„å®ç°ï¼Œå› ä¸ºæ— è®ºæ•´æ•°æ˜¯æœ‰ç¬¦å·çš„è¿˜æ˜¯æ— ç¬¦å·çš„ï¼Œå…¶å†…éƒ¨çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼éƒ½æ˜¯ç›¸åŒçš„ã€‚

- åœ¨ Java ä¸­ï¼Œç¼–è¯‘å™¨ä½¿ç”¨[äºŒè¿›åˆ¶è¡¥ç ](https://baike.baidu.com/item/äºŒè¿›åˆ¶è¡¥ç /5295284)è®°æ³•æ¥è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•°ã€‚å› æ­¤ï¼Œåœ¨ä¸Šé¢çš„ **ç¤ºä¾‹ 2** ä¸­ï¼Œè¾“å…¥è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•° `-3`ï¼Œè¾“å‡ºè¡¨ç¤ºæœ‰ç¬¦å·

  æ•´æ•° `-1073741825`ã€‚

### è¿›é˜¶

å¦‚æœå¤šæ¬¡è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œä½ å°†å¦‚ä½•ä¼˜åŒ–ä½ çš„ç®—æ³•ï¼Ÿ

## é¢˜è§£

```python
def reverse_bits(n):
    """ é€ä½é¢ å€’ """
    ret, power = 0, 31
    while n:
        ret += (n & 1) << power
        n >>= 1
        power -= 1
    return ret
```

```python
# å¸¦è®°å¿†åŒ–çš„æŒ‰å­—èŠ‚é¢ å€’
import functools

class Solution:
    # @param n, an integer
    # @return an integer
    def reverseBits(self, n):
        ret, power = 0, 24
        while n:
            ret += self.reverseByte(n & 0xff) << power
            n = n >> 8
            power -= 8
        return ret

    # memoization with decorator
    @functools.lru_cache(maxsize=256)
    def reverseByte(self, byte):
        return (byte * 0x0202020202 & 0x010884422010) % 1023
```

```python
class Solution:
    # @param n, an integer
    # @return an integer
    def reverseBits(self, n):
        n = (n >> 16) | (n << 16)
        n = ((n & 0xff00ff00) >> 8) | ((n & 0x00ff00ff) << 8)
        n = ((n & 0xf0f0f0f0) >> 4) | ((n & 0x0f0f0f0f) << 4)
        n = ((n & 0xcccccccc) >> 2) | ((n & 0x33333333) << 2)
        n = ((n & 0xaaaaaaaa) >> 1) | ((n & 0x55555555) << 1)
        return n
```

ğŸ¥ **è€ƒå¯Ÿè¦ç‚¹**ï¼šä½ç§»ã€åˆ†æ²»

ğŸ¬ **è§£é¢˜æ€è·¯**ï¼šé€ä½é¢ å€’ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(logn)ï¼›å¸¦è®°å¿†åŒ–çš„æŒ‰å­—èŠ‚é¢ å€’ï¼›ä½æ“ä½œâ•åˆ†æ²»ã€‚

ğŸ‰ **æ—¶é—´å¤æ‚åº¦**ï¼šO(1)

ğŸ­ **ç©ºé—´å¤æ‚åº¦**ï¼šO(1)
