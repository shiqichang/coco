# 08 å¤–è§‚æ•°åˆ—

> ğŸŒˆ **åˆçº§ç®—æ³•ç³»åˆ—ä¹‹å­—ç¬¦ä¸²**
>
> ä½ çš„æ— ç•æºäºæ— çŸ¥ã€‚

## é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªæ­£æ•´æ•° nï¼ˆ1 â‰¤ n â‰¤ 30ï¼‰ï¼Œè¾“å‡ºå¤–è§‚æ•°åˆ—çš„ç¬¬ n é¡¹ã€‚
æ³¨æ„ï¼šæ•´æ•°åºåˆ—ä¸­çš„æ¯ä¸€é¡¹å°†è¡¨ç¤ºä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚
ã€Œå¤–è§‚æ•°åˆ—ã€æ˜¯ä¸€ä¸ªæ•´æ•°åºåˆ—ï¼Œä»æ•°å­— 1 å¼€å§‹ï¼Œåºåˆ—ä¸­çš„æ¯ä¸€é¡¹éƒ½æ˜¯å¯¹å‰ä¸€é¡¹çš„æè¿°ã€‚å‰äº”é¡¹å¦‚ä¸‹ï¼š

```shell
1.     1
2.     11
3.     21
4.     1211
5.     111221
```

ç¬¬ä¸€é¡¹æ˜¯æ•°å­— 1
æè¿°å‰ä¸€é¡¹ï¼Œè¿™ä¸ªæ•°æ˜¯ 1 å³ â€œä¸€ä¸ª 1 â€ï¼Œè®°ä½œ 11
æè¿°å‰ä¸€é¡¹ï¼Œè¿™ä¸ªæ•°æ˜¯ 11 å³ â€œä¸¤ä¸ª 1 â€ ï¼Œè®°ä½œ 21
æè¿°å‰ä¸€é¡¹ï¼Œè¿™ä¸ªæ•°æ˜¯ 21 å³ â€œä¸€ä¸ª 2 ä¸€ä¸ª 1 â€ ï¼Œè®°ä½œ 1211
æè¿°å‰ä¸€é¡¹ï¼Œè¿™ä¸ªæ•°æ˜¯ 1211 å³ â€œä¸€ä¸ª 1 ä¸€ä¸ª 2 ä¸¤ä¸ª 1 â€ ï¼Œè®°ä½œ 111221

### ç¤ºä¾‹1

> è¾“å…¥: 1
> è¾“å‡º: "1"
> è§£é‡Šï¼šè¿™æ˜¯ä¸€ä¸ªåŸºæœ¬æ ·ä¾‹ã€‚

### ç¤ºä¾‹2

> è¾“å…¥: 4
> è¾“å‡º: "1211"
> è§£é‡Šï¼šå½“ n = 3 æ—¶ï¼Œåºåˆ—æ˜¯ "21"ï¼Œå…¶ä¸­æˆ‘ä»¬æœ‰ "2" å’Œ "1" ä¸¤ç»„ï¼Œ"2" å¯ä»¥è¯»ä½œ "12"ï¼Œä¹Ÿå°±æ˜¯å‡ºç°é¢‘æ¬¡ = 1 è€Œ å€¼ = 2ï¼›ç±»ä¼¼ "1" å¯ä»¥è¯»ä½œ "11"ã€‚æ‰€ä»¥ç­”æ¡ˆæ˜¯ "12" å’Œ "11" ç»„åˆåœ¨ä¸€èµ·ï¼Œä¹Ÿå°±æ˜¯ "1211"ã€‚

## é¢˜è§£

```python
def count_and_say(n):
    """ é€’å½’ """
    if n == 1:
        return '1'
    s = count_and_say(n-1)

    i, res = 0, ''
    for j, c in enumerate(s):
        if c != s[i]:
            res += str(j - i) + s[i]  # ä½¿ç”¨ j-i ç»Ÿè®¡ç›¸åŒå…ƒç´ çš„ä¸ªæ•°
            i = j
    res += str(len(s) - i) + s[-1]  # ç»Ÿè®¡æœ€åä¸€ä¸ªå…ƒç´ 
    return res
```

```python
def count_and_say(n):
    """ è¿­ä»£ """
    res = '1'
    for _ in range(n-1):  # æ§åˆ¶å¾ªç¯æ¬¡æ•°
        i, tmp = 0, ''
        for j, c in enumerate(res):
            if c != res[i]:
                tmp += str(j - i) + res[i]
                i = j
        res = tmp + str(len(res) - i) + res[-1]
    return res
```

```python
def count_and_say(n):
    """ æ­£åˆ™è¡¨è¾¾å¼ï¼šæå–å…ƒç´  """
    if n == 1:
        return '1'
    s = count_and_say(n-1)

    p = r'(\d)\1*'
    pattern = re.compile(p)
    res = [_.group() for _ in pattern.finditer(s)]  # æå–ç»“æœ
    return ''.join(str(len(c)) + c[0] for c in res)  # join å†…éƒ¨çš„æ˜¯ç”Ÿæˆå™¨
```

```python
def count_and_say(n):
    """ æ­£åˆ™è¡¨è¾¾å¼ï¼šå…ƒç´ æ›¿æ¢ """
    res = '1'
    p = r'(\d)\1*'  # \1 æ˜¯ä¸ºäº†å¼•ç”¨å‰é¢çš„ \d, è¡¨æ˜ \1 æ˜¯ä¸ \d åŒ¹é…åˆ°ç›¸åŒçš„æ•°å­—
    pattern = re.compile(p)
    for _ in range(n-1):
        res = pattern.sub(lambda x: str(len(x.group())) + x.group(1), res)  # æ›¿æ¢
    return res
```

ğŸ¥ **è€ƒå¯Ÿè¦ç‚¹**ï¼šåŒæŒ‡é’ˆã€è¿­ä»£ã€é€’å½’ã€æ­£åˆ™è¡¨è¾¾å¼

ğŸ¬ **è§£é¢˜æ€è·¯**ï¼šé€’å½’ï¼›è¿­ä»£ï¼›æ­£åˆ™è¡¨è¾¾å¼ã€‚

- `(\d)\1*` ç”¨æ¥æå–è¿åœ¨ä¸€èµ·çš„å…ƒç´ ã€‚

ğŸ‰ **æ—¶é—´å¤æ‚åº¦**ï¼šO(n^2)

ğŸ­ **ç©ºé—´å¤æ‚åº¦**ï¼šO(n)
