# 49 æŠŠå­—ç¬¦ä¸²è½¬æ¢æˆæ•´æ•°

> ğŸŒŸ **å‰‘æŒ‡ Offer ç³»åˆ—**
>
> ç»™å²æœˆä»¥æ–‡æ˜ï¼Œè€Œä¸æ˜¯ç»™æ–‡æ˜ä»¥å²æœˆã€‚

## é¢˜ç›®æè¿°

å°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢æˆä¸€ä¸ªæ•´æ•°ï¼Œè¦æ±‚ä¸èƒ½ä½¿ç”¨å­—ç¬¦ä¸²è½¬æ¢æ•´æ•°çš„åº“å‡½æ•°ã€‚ æ•°å€¼ä¸º0æˆ–è€…å­—ç¬¦ä¸²ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„æ•°å€¼åˆ™è¿”å›0.

### è¾“å…¥æè¿°

> è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²,åŒ…æ‹¬æ•°å­—å­—æ¯ç¬¦å·,å¯ä»¥ä¸ºç©º

### ç¤ºä¾‹1

è¾“å…¥

> +2147483647
> 1a33

è¾“å‡º

> 2147483647
> 0

## é¢˜è§£

```python
def str2int(s):
    s = s.strip()  # åˆ é™¤é¦–å°¾ç©ºæ ¼
    if not s:
        return 0  # å­—ç¬¦ä¸²ä¸ºç©ºåˆ™ç›´æ¥è¿”å›
    res, i, sign = 0, 1, 1
    int_max, int_min, bndry = 2**31-1, -2**31, 2**31//10
    if s[0] == '-':
        sign = -1  # ä¿å­˜è´Ÿå·
    elif s[0] != '+':
        i = 0  # è‹¥æ— ç¬¦å·ä½ï¼Œåˆ™éœ€ä» i=0 å¼€å§‹æ•°å­—æ‹¼æ¥
    for c in s[i:]:
        if not '0' <= c <= '9':
            return 0  # é‡åˆ°éæ•°å­—çš„å­—ç¬¦åˆ™è·³å‡º
        if res > bndry or (res == bndry and c > '7'):
            return int_max if sign == 1 else int_min  # æ•°å­—è¶Šç•Œå¤„ç†
        res = 10 * res + ord(c) - ord('0')  # æ•°å­—æ‹¼æ¥
    return sign * res
```

```python
def str2int(s):
    """ ä¸ä½¿ç”¨ strip() æ–¹æ³•ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(1) """
    if not s:
        return 0  # ç©ºå­—ç¬¦ä¸²ï¼Œæå‰è¿”å›
    res, i, sign, length = 0, 0, 1, len(s)
    int_max, int_min, bndry = 2**31-1, -2**31, 2**31//10
    while s[i] == ' ':
        i += 1
        if i == length:
            return 0  # å­—ç¬¦ä¸²å…¨ä¸ºç©ºæ ¼ï¼Œæå‰è¿”å›
    if s[i] == '-':
        sign = -1
    elif s[i] in '+-':
        i += 1
    for c in s[i:]:
        if not '0' <= c <= '9':
            return 0  # é‡åˆ°éæ•°å­—çš„å­—ç¬¦åˆ™è·³å‡º
        if res > bndry or (res == bndry and c > '7'):
            return int_max if sign == 1 else int_min  # æ•°å­—è¶Šç•Œå¤„ç†
        res = 10 * res + ord(c) - ord('0')  # æ•°å­—æ‹¼æ¥
    return sign * res
```

![1](https://tva1.sinaimg.cn/large/007S8ZIlly1gismkv1r2aj30n00e2dhx.jpg)

![2](https://tva1.sinaimg.cn/large/007S8ZIlly1gismqiruk1j30ku0g2tba.jpg)

ğŸ¥ **è€ƒå¯Ÿè¦ç‚¹**ï¼šå­—ç¬¦ä¸²ã€æ•°å­—è¶Šç•Œå¤„ç†

ğŸ¬ **è§£é¢˜æ€è·¯**ï¼šè€ƒè™‘4ç§å­—ç¬¦(*é¦–éƒ¨ç©ºæ ¼ï¼›ç¬¦å·ä½ï¼›éæ•°å­—å­—ç¬¦ï¼›æ•°å­—å­—ç¬¦*)ã€‚è¦æ±‚è¿”å›çš„æ•°å€¼èŒƒå›´åº”åœ¨ `[-2^31, 2^31-1]`

ğŸ‰ **æ—¶é—´å¤æ‚åº¦**ï¼šO(n)

ğŸ­ **ç©ºé—´å¤æ‚åº¦**ï¼šO(n)
