# 创建高性能的索引

## 一、索引基础

### 1. 索引类型

#### B-Tree 索引

InnoDB 使用的是 `B+Tree` 结构存储。InnoDB 按照原数据格式进行存储，根据主键引用被索引的行。

B-Tree 意味着所有的值都是按顺序存储，并且每个叶子页到根的距离相同。

B-Tree 索引适用于全键值、键值范围或键前缀查找。其中键前缀查找只适用于根据最左前缀的查找。

**限制**：

- 若不是按照索引的最左列开始查找，则无法使用索引；
- 不能跳过索引中的列；
- 若查询中有某个列的范围查找，则其右边所有列都无法使用索引。

#### 哈希索引

`hash index` 基于哈希表实现，只有精确匹配所有列的索引才有效。只有 Memory 引擎显式支持哈希索引，也是其默认索引类型，同时它也支持 B-Tree 索引。Memory 引擎是支持非唯一哈希索引。

**限制**：

- 哈希索引只包含哈希值和行指针，不存储字段值；
- 不是按照索引值顺序存储，无法用于排序；
- 不支持部分索引列匹配查找；
- 只支持等值比较，包括 `=, IN(), <=>`, 也不支持任何范围查询；
- 访问哈希索引的速度非常快，除非有很多哈希冲突（不同的索引列值有相同的哈希值）；
- 若哈希冲突很多，一些索引维护操作的代价很高。

InnoDB 引擎的 “自适应哈希索引（adaptive hash index）”.
